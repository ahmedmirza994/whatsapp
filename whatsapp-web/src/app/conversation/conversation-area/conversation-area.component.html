<div class="chat-area-container">
	@if (conversation) {
		<!-- Chat Header -->
		<div class="chat-header">
			<div class="participant-info">
				<div class="avatar">
					<!-- Placeholder -->
					<span class="initials">{{ getChatPartnerName().charAt(0) }}</span>
				</div>
				<span class="name">{{ getChatPartnerName() }}</span>
			</div>
			<!-- Add icons for call, video, search later -->
		</div>

		<!-- Message Area -->
		<div class="message-container" #messageContainer>
			@if (isLoading()) {
				<div class="loading">Loading messages...</div>
			} @else if (error()) {
				<div class="error">{{ error() }}</div>
			} @else if (messages().length === 0) {
				<div class="empty">No messages in this conversation yet. Start chatting!</div>
			} @else {
				@for (msg of messages(); track msg.id) {
					<div
						class="message-bubble"
						[class.sent]="msg.senderId === currentUser()?.id"
						[class.received]="msg.senderId !== currentUser()?.id"
					>
						<div class="message-content">{{ msg.content }}</div>
						<div class="message-time">
							{{ msg.sentAt | date: 'shortTime' }}
						</div>
					</div>
				}
			}
		</div>

		<!-- Message Input Area -->
		<div class="message-input-area">
			<!-- Add icons for emoji, attachments later -->
			<input
				type="text"
				placeholder="Type a message"
				[(ngModel)]="newMessageContent"
				(keyup.enter)="sendMessage()"
			/>
			<button (click)="sendMessage()" [disabled]="!newMessageContent()">
				<!-- Send Icon (using simple text for now) -->
				Send
			</button>
		</div>
	} @else {
		<div class="no-chat-selected">
			<h2>Select a chat to start messaging</h2>
			<!-- You could add an illustration here -->
		</div>
	}
</div>
