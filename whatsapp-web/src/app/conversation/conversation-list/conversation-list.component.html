<div class="conversation-list-container">
	<div class="header">
		<h3>Chats</h3>
	</div>

	@if (isLoading()) {
		<div class="loading">Loading conversations...</div>
	} @else if (error()) {
		<div class="error">{{ error() }}</div>
	} @else if (conversations().length === 0) {
		<div class="empty">No conversations yet.</div>
	} @else {
		<ul class="list">
			@for (convo of conversations(); track convo.id) {
				<li
					(click)="selectConversation(convo)"
					[class.selected]="convo.id === selectedConversationId()"
				>
					<div class="avatar">
						<!-- Placeholder for participant avatar -->
						<span class="initials">{{ getOtherParticipantName(convo).charAt(0) }}</span>
					</div>
					<div class="content">
						<div class="name-time">
							<span class="name">{{ getOtherParticipantName(convo) }}</span>
							<span class="time">{{
								convo.lastMessage?.sentAt | date: 'shortTime'
							}}</span>
						</div>
						<div class="last-message">
							{{ getLastMessagePreview(convo) }}
						</div>
					</div>
				</li>
			}
		</ul>
	}
</div>
