<div class="chat-container">
	<aside class="sidebar">
		<div class="user-info">
			<div class="user-details">
				<div class="avatar-placeholder">
					<!-- Placeholder: You can replace this with an <img> tag later -->
					@if (currentUser(); as user) {
						<span>{{ user.name[0].toUpperCase() }}</span>
						<!-- Display first initial -->
					} @else {
						<span>?</span>
					}
				</div>
				@if (currentUser(); as user) {
					<span class="user-name">{{ user.name }}</span>
				} @else {
					<span class="user-name">Loading...</span>
				}
			</div>
			<button title="Logout" (click)="logout()" class="logout-button">
				<!-- Replace text with an icon (e.g., SVG or icon font) later -->
				<svg
					xmlns="http://www.w3.org/2000/svg"
					width="18"
					height="18"
					viewBox="0 0 24 24"
					fill="none"
					stroke="currentColor"
					stroke-width="2"
					stroke-linecap="round"
					stroke-linejoin="round"
				>
					<path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path>
					<polyline points="16 17 21 12 16 7"></polyline>
					<line x1="21" y1="12" x2="9" y2="12"></line>
				</svg>
			</button>
		</div>
		<app-conversation-list
			[conversations]="conversations()"
			(conversationSelected)="onConversationSelected($event)"
			[selectedConversationId]="selectedConversationId$ | async"
		/>
		@if (error()) {
			<p class="error-message">{{ error() }}</p>
		}
	</aside>
	<main class="chat-area">
		<!-- Router outlet to render the ConversationDetailComponent or default message -->
		<router-outlet></router-outlet>
		<!-- You could add a default message here if router-outlet is empty -->
		@if (!(selectedConversationId$ | async)) {
			<div class="no-conversation-selected">
				<p>Select a conversation to start chatting</p>
			</div>
		}
	</main>
</div>
